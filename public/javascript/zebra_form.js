(function(c){c.Zebra_DatePicker=function(ga,ha){var ka={always_visible:!1,days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),days_abbr:!1,direction:0,disabled_dates:!1,enabled_dates:!1,first_day_of_week:1,format:"Y-m-d",inside:!0,lang_clear_date:"Clear date",months:"January February March April May June July August September October November December".split(" "),months_abbr:!1,offset:[5,-5],pair:!1,readonly_element:!0,select_other_months:!1,show_clear_date:0,show_icon:!0,show_other_months:!0, show_select_today:"Today",show_week_number:!1,start_date:!1,view:"days",weekend_days:[0,6],zero_pad:!1,onChange:null,onClear:null,onSelect:null},t,h,r,D,E,H,I,S,T,O,Z,n,q,w,x,g,U,K,L,V,G,$,s,u,aa,P,W,la,ma,na,B,ia,ba,X,ca,oa,a=this;a.settings={};var d=c(ga),ua=function(e){if(!e){a.settings=c.extend({},ka,ha);for(var b in d.data())0===b.indexOf("zdp_")&&(b=b.replace(/^zdp\_/,""),void 0!==ka[b]&&(a.settings[b]=d.data("zdp_"+b)))}a.settings.readonly_element&&d.attr("readonly","readonly");b={days:["d", "j","D"],months:["F","m","M","n","t"],years:["o","Y","y"]};var A=!1,f=!1,v=!1,l=null;for(l in b)c.each(b[l],function(c,b){-1<a.settings.format.indexOf(b)&&("days"==l?A=!0:"months"==l?f=!0:"years"==l&&(v=!0))});B=A&&f&&v?["years","months","days"]:!A&&f&&v?["years","months"]:A||f||!v?A||!f||v?["years","months","days"]:["months"]:["years"];-1==c.inArray(a.settings.view,B)&&(a.settings.view=B[B.length-1]);G=[];V=[];for(var z=0;2>z;z++)b=0===z?a.settings.disabled_dates:a.settings.enabled_dates,c.isArray(b)&& 0<b.length&&c.each(b,function(){for(var a=this.split(" "),b=0;4>b;b++){a[b]||(a[b]="*");a[b]=-1<a[b].indexOf(",")?a[b].split(","):Array(a[b]);for(var e=0;e<a[b].length;e++)if(-1<a[b][e].indexOf("-")){var A=a[b][e].match(/^([0-9]+)\-([0-9]+)/);if(null!==A){for(var f=p(A[1]);f<=p(A[2]);f++)-1==c.inArray(f,a[b])&&a[b].push(f+"");a[b].splice(e,1)}}for(e=0;e<a[b].length;e++)a[b][e]=isNaN(p(a[b][e]))?a[b][e]:p(a[b][e])}0===z?G.push(a):V.push(a)});b=new Date;var m=a.settings.reference_date?a.settings.reference_date: d.data("zdp_reference_date")&&void 0!==d.data("zdp_reference_date")?d.data("zdp_reference_date"):b,k,M;u=s=void 0;n=m.getMonth();T=b.getMonth();q=m.getFullYear();O=b.getFullYear();w=m.getDate();Z=b.getDate();if(!0===a.settings.direction)s=m;else if(!1===a.settings.direction)u=m,W=u.getMonth(),P=u.getFullYear(),aa=u.getDate();else if(!c.isArray(a.settings.direction)&&Y(a.settings.direction)&&0<p(a.settings.direction)||c.isArray(a.settings.direction)&&((k=da(a.settings.direction[0]))||!0===a.settings.direction[0]|| Y(a.settings.direction[0])&&0<a.settings.direction[0])&&((M=da(a.settings.direction[1]))||!1===a.settings.direction[1]||Y(a.settings.direction[1])&&0<=a.settings.direction[1]))s=k?k:new Date(q,n,w+(c.isArray(a.settings.direction)?p(!0===a.settings.direction[0]?0:a.settings.direction[0]):p(a.settings.direction))),n=s.getMonth(),q=s.getFullYear(),w=s.getDate(),M&&+M>=+s?u=M:!M&&!1!==a.settings.direction[1]&&c.isArray(a.settings.direction)&&(u=new Date(q,n,w+p(a.settings.direction[1]))),u&&(W=u.getMonth(), P=u.getFullYear(),aa=u.getDate());else if(!c.isArray(a.settings.direction)&&Y(a.settings.direction)&&0>p(a.settings.direction)||c.isArray(a.settings.direction)&&(!1===a.settings.direction[0]||Y(a.settings.direction[0])&&0>a.settings.direction[0])&&((k=da(a.settings.direction[1]))||Y(a.settings.direction[1])&&0<=a.settings.direction[1]))u=new Date(q,n,w+(c.isArray(a.settings.direction)?p(!1===a.settings.direction[0]?0:a.settings.direction[0]):p(a.settings.direction))),W=u.getMonth(),P=u.getFullYear(), aa=u.getDate(),k&&+k<+u?s=k:!k&&c.isArray(a.settings.direction)&&(s=new Date(P,W,aa-p(a.settings.direction[1]))),s&&(n=s.getMonth(),q=s.getFullYear(),w=s.getDate());else if(c.isArray(a.settings.disabled_dates)&&0<a.settings.disabled_dates.length)for(var F in G)if("*"==G[F][0]&&"*"==G[F][1]&&"*"==G[F][2]&&"*"==G[F][3]){var fa=[];c.each(V,function(){"*"!=this[2][0]&&fa.push(parseInt(this[2][0]+("*"==this[1][0]?"12":y(this[1][0],2))+("*"==this[0][0]?"*"==this[1][0]?"31":(new Date(this[2][0],this[1][0], 0)).getDate():y(this[0][0],2)),10))});fa.sort();if(0<fa.length){var Q=(fa[0]+"").match(/([0-9]{4})([0-9]{2})([0-9]{2})/);q=parseInt(Q[1],10);n=parseInt(Q[2],10)-1;w=parseInt(Q[3],10)}break}if(C(q,n,w)){for(;C(q);)s?(q++,n=0):(q--,n=11);for(;C(q,n);)s?(n++,w=1):(n--,w=(new Date(q,n+1,0)).getDate()),11<n?(q++,n=0,w=1):0>n&&(q--,n=11,w=(new Date(q,n+1,0)).getDate());for(;C(q,n,w);)s?w++:w--,b=new Date(q,n,w),q=b.getFullYear(),n=b.getMonth(),w=b.getDate();b=new Date(q,n,w);q=b.getFullYear();n=b.getMonth(); w=b.getDate()}(k=da(d.val()||(a.settings.start_date?a.settings.start_date:"")))&&C(k.getFullYear(),k.getMonth(),k.getDate())&&d.val("");pa(k);if(!a.settings.always_visible&&(e||(a.settings.show_icon?("firefox"==N.name&&d.is('input[type="text"]')&&"inline"==d.css("display")&&d.css("display","inline-block"),k=jQuery('<span class="Zebra_DatePicker_Icon_Wrapper"></span>').css({display:d.css("display"),position:"static"==d.css("position")?"relative":d.css("position"),"float":d.css("float"),top:d.css("top"), right:d.css("right"),bottom:d.css("bottom"),left:d.css("left")}),d.wrap(k).css({position:"relative",top:"auto",right:"auto",bottom:"auto",left:"auto"}),r=jQuery('<button type="button" class="Zebra_DatePicker_Icon'+("disabled"==d.attr("disabled")?" Zebra_DatePicker_Icon_Disabled":"")+'">Pick a date</button>'),a.icon=r,ia=r.add(d)):ia=d,ia.bind("click",function(b){b.preventDefault();d.attr("disabled")||("none"!=h.css("display")?a.hide():a.show())}),void 0!==r&&r.insertAfter(d)),void 0!==r)){r.attr("style", "");a.settings.inside&&r.addClass("Zebra_DatePicker_Icon_Inside");k=d.outerWidth();M=d.outerHeight();F=parseInt(d.css("marginLeft"),10)||0;b=parseInt(d.css("marginTop"),10)||0;var m=r.outerWidth(),qa=r.outerHeight(),xa=parseInt(r.css("marginLeft"),10)||0,ya=parseInt(r.css("marginRight"),10)||0;a.settings.inside?r.css({top:b+(M-qa)/2,left:F+(k-m-ya)}):r.css({top:b+(M-qa)/2,left:F+k+xa})}void 0!==r&&(d.is(":visible")?r.show():r.hide());ca=!1!==a.settings.show_select_today&&-1<c.inArray("days",B)&&!C(O, T,Z)?a.settings.show_select_today:!1;e||(c(window).bind("resize",ra),h=c('<div class="Zebra_DatePicker"><table class="dp_header"><tr><td class="dp_previous">&#171;</td><td class="dp_caption">&#032;</td><td class="dp_next">&#187;</td></tr></table><table class="dp_daypicker"></table><table class="dp_monthpicker"></table><table class="dp_yearpicker"></table><table class="dp_footer"><tr><td class="dp_today"'+(!1!==a.settings.show_clear_date?' style="width:50%"':"")+">"+ca+'</td><td class="dp_clear"'+ (!1!==ca?' style="width:50%"':"")+">"+a.settings.lang_clear_date+"</td></tr></table></div>"),a.datepicker=h,D=c("table.dp_header",h),E=c("table.dp_daypicker",h),H=c("table.dp_monthpicker",h),I=c("table.dp_yearpicker",h),X=c("table.dp_footer",h),ba=c("td.dp_today",X),S=c("td.dp_clear",X),a.settings.always_visible?d.attr("disabled")||(a.settings.always_visible.append(h),a.show()):c("body").append(h),h.delegate("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked, .dp_week_number)", "mouseover",function(){c(this).addClass("dp_hover")}).delegate("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked, .dp_week_number)","mouseout",function(){c(this).removeClass("dp_hover")}),za(c("td",D)),c(".dp_previous",D).bind("click",function(){c(this).hasClass("dp_blocked")||("months"==t?g--:"years"==t?g-=12:0>--x&&(x=11,g--),R())}),c(".dp_caption",D).bind("click",function(){t="days"==t?-1<c.inArray("months",B)?"months":-1<c.inArray("years",B)?"years":"days":"months"==t? -1<c.inArray("years",B)?"years":-1<c.inArray("days",B)?"days":"months":-1<c.inArray("days",B)?"days":-1<c.inArray("months",B)?"months":"years";R()}),c(".dp_next",D).bind("click",function(){c(this).hasClass("dp_blocked")||("months"==t?g++:"years"==t?g+=12:12==++x&&(x=0,g++),R())}),E.delegate("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_week_number)","click",function(){a.settings.select_other_months&&null!==(Q=c(this).attr("class").match(/date\_([0-9]{4})(0[1-9]|1[012])(0[1-9]|[12][0-9]|3[01])/))? ea(Q[1],Q[2]-1,Q[3],"days",c(this)):ea(g,x,p(c(this).html()),"days",c(this))}),H.delegate("td:not(.dp_disabled)","click",function(){var b=c(this).attr("class").match(/dp\_month\_([0-9]+)/);x=p(b[1]);-1==c.inArray("days",B)?ea(g,x,1,"months",c(this)):(t="days",a.settings.always_visible&&d.val(""),R())}),I.delegate("td:not(.dp_disabled)","click",function(){g=p(c(this).html());-1==c.inArray("months",B)?ea(g,1,1,"years",c(this)):(t="months",a.settings.always_visible&&d.val(""),R())}),c(ba).bind("click", function(b){b.preventDefault();ea(O,T,Z,"days",c(".dp_current",E));a.settings.always_visible&&a.show();a.hide()}),c(S).bind("click",function(b){b.preventDefault();d.val("");a.settings.always_visible?(L=K=U=null,c("td.dp_selected",h).removeClass("dp_selected")):g=x=L=K=U=null;a.hide();if(a.settings.onClear&&"function"==typeof a.settings.onClear)a.settings.onClear(d)}),a.settings.always_visible||c(document).bind({mousedown:sa,keyup:ta}),R())};a.destroy=function(){void 0!==a.icon&&a.icon.remove();a.datepicker.remove(); c(document).unbind("keyup",ta);c(document).unbind("mousedown",sa);c(window).unbind("resize",ra);d.removeData("Zebra_DatePicker");delete a};a.hide=function(){a.settings.always_visible||(va("hide"),h.hide())};a.show=function(){t=a.settings.view;var e=da(d.val()||(a.settings.start_date?a.settings.start_date:""));e?(K=e.getMonth(),x=e.getMonth(),L=e.getFullYear(),g=e.getFullYear(),U=e.getDate(),C(L,K,U)&&(d.val(""),x=n,g=q)):(x=n,g=q);R();if(a.settings.always_visible)h.show();else{var e=h.outerWidth(), b=h.outerHeight(),A=(void 0!==r?r.offset().left+r.outerWidth(!0):d.offset().left+d.outerWidth(!0))+a.settings.offset[0],f=(void 0!==r?r.offset().top:d.offset().top)-b+a.settings.offset[1],v=c(window).width(),l=c(window).height(),z=c(window).scrollTop(),m=c(window).scrollLeft();A+e>m+v&&(A=m+v-e);A<m&&(A=m);f+b>z+l&&(f=z+l-b);f<z&&(f=z);h.css({left:A,top:f});h.fadeIn("explorer"==N.name&&9>N.version?0:150,"linear");va()}};a.update=function(e){a.original_direction&&(a.original_direction=a.direction); a.settings=c.extend(a.settings,e);ua(!0)};var da=function(e){e+="";if(""!==c.trim(e)){for(var b=a.settings.format.replace(/([-.,*+?^${}()|[\]\/\\])/g,"\\$1"),A="dDjlNSwFmMnYy".split(""),f=[],v=[],l=null,d=null,m=0;m<A.length;m++)-1<(l=b.indexOf(A[m]))&&f.push({character:A[m],position:l});f.sort(function(a,b){return a.position-b.position});c.each(f,function(a,b){switch(b.character){case "d":v.push("0[1-9]|[12][0-9]|3[01]");break;case "D":v.push("[a-z]{3}");break;case "j":v.push("[1-9]|[12][0-9]|3[01]"); break;case "l":v.push("[a-z]+");break;case "N":v.push("[1-7]");break;case "S":v.push("st|nd|rd|th");break;case "w":v.push("[0-6]");break;case "F":v.push("[a-z]+");break;case "m":v.push("0[1-9]|1[012]+");break;case "M":v.push("[a-z]{3}");break;case "n":v.push("[1-9]|1[012]");break;case "Y":v.push("[0-9]{4}");break;case "y":v.push("[0-9]{2}")}});if(v.length&&(f.reverse(),c.each(f,function(a,c){b=b.replace(c.character,"("+v[v.length-a-1]+")")}),v=RegExp("^"+b+"$","ig"),d=v.exec(e))){e=new Date;var k= e.getDate(),g=e.getMonth()+1,F=e.getFullYear(),n="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),h="January February March April May June July August September October November December".split(" "),q,r=!0;f.reverse();c.each(f,function(b,e){if(!r)return!0;switch(e.character){case "m":case "n":g=p(d[b+1]);break;case "d":case "j":k=p(d[b+1]);break;case "D":case "l":case "F":case "M":q="D"==e.character||"l"==e.character?a.settings.days:a.settings.months;r=!1;c.each(q,function(a, c){if(r)return!0;if(d[b+1].toLowerCase()==c.substring(0,"D"==e.character||"M"==e.character?3:c.length).toLowerCase()){switch(e.character){case "D":d[b+1]=n[a].substring(0,3);break;case "l":d[b+1]=n[a];break;case "F":d[b+1]=h[a];g=a+1;break;case "M":d[b+1]=h[a].substring(0,3),g=a+1}r=!0}});break;case "Y":F=p(d[b+1]);break;case "y":F="19"+p(d[b+1])}});if(r&&(f=new Date(F,(g||1)-1,k||1),f.getFullYear()==F&&f.getDate()==(k||1)&&f.getMonth()==(g||1)-1))return f}return!1}},za=function(a){"firefox"==N.name? a.css("MozUserSelect","none"):"explorer"==N.name?a.bind("selectstart",function(){return!1}):a.mousedown(function(){return!1})},wa=function(){var e=(new Date(g,x+1,0)).getDate(),b=(new Date(g,x,1)).getDay(),A=(new Date(g,x,0)).getDate(),b=b-a.settings.first_day_of_week,b=0>b?7+b:b;ja(a.settings.months[x]+", "+g);var f="<tr>";a.settings.show_week_number&&(f+="<th>"+a.settings.show_week_number+"</th>");for(var d=0;7>d;d++)f+="<th>"+(c.isArray(a.settings.days_abbr)&&void 0!==a.settings.days_abbr[(a.settings.first_day_of_week+ d)%7]?a.settings.days_abbr[(a.settings.first_day_of_week+d)%7]:a.settings.days[(a.settings.first_day_of_week+d)%7].substr(0,2))+"</th>";f+="</tr><tr>";for(d=0;42>d;d++){0<d&&0===d%7&&(f+="</tr><tr>");if(0===d%7&&a.settings.show_week_number){var l=new Date(g,x,d-b+1),z=l.getFullYear(),m=l.getMonth()+1,l=l.getDate(),k=void 0,n=void 0,h=void 0,r=h=void 0,p=void 0,h=n=k=void 0;3>m?(k=z-1,n=(k/4|0)-(k/100|0)+(k/400|0),h=((k-1)/4|0)-((k-1)/100|0)+((k-1)/400|0),h=n-h,r=0,p=l-1+31*(m-1)):(k=z,n=(k/4|0)-(k/ 100|0)+(k/400|0),h=((k-1)/4|0)-((k-1)/100|0)+((k-1)/400|0),h=n-h,r=h+1,p=l+((153*(m-3)+2)/5|0)+58+h);k=(k+n)%7;l=(p+k-r)%7;n=p+3-l;h=0>n?53-((k-h)/5|0):n>364+h?1:(n/7|0)+1;f+='<td class="dp_week_number">'+h+"</td>"}z=d-b+1;if(a.settings.select_other_months&&(d<b||z>e))var q=new Date(g,x,z),s=q.getFullYear(),u=q.getMonth(),t=q.getDate(),q=s+y(u+1,2)+y(t,2);d<b?f+='<td class="'+(a.settings.select_other_months&&!C(s,u,t)?"dp_not_in_month_selectable date_"+q:"dp_not_in_month")+'">'+(a.settings.select_other_months|| a.settings.show_other_months?y(A-b+d+1,a.settings.zero_pad?2:0):"&nbsp;")+"</td>":z>e?f+='<td class="'+(a.settings.select_other_months&&!C(s,u,t)?"dp_not_in_month_selectable date_"+q:"dp_not_in_month")+'">'+(a.settings.select_other_months||a.settings.show_other_months?y(z-e,a.settings.zero_pad?2:0):"&nbsp;")+"</td>":(m=(a.settings.first_day_of_week+d)%7,l="",C(g,x,z)?(l=-1<c.inArray(m,a.settings.weekend_days)?"dp_weekend_disabled":l+" dp_disabled",x==T&&g==O&&Z==z&&(l+=" dp_disabled_current")):(-1< c.inArray(m,a.settings.weekend_days)&&(l="dp_weekend"),x==K&&g==L&&U==z&&(l+=" dp_selected"),x==T&&g==O&&Z==z&&(l+=" dp_current")),f+="<td"+(""!==l?' class="'+c.trim(l)+'"':"")+">"+(a.settings.zero_pad?y(z,2):z)+"</td>")}E.html(c(f+"</tr>"));a.settings.always_visible&&(la=c("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked, .dp_week_number)",E));E.show()},Aa=function(){ja(g);for(var e="<tr>",b=0;12>b;b++){0<b&&0===b%3&&(e+="</tr><tr>");var d="dp_month_"+b;C(g,b)?d+=" dp_disabled": !1!==K&&K==b?d+=" dp_selected":T==b&&O==g&&(d+=" dp_current");e+='<td class="'+c.trim(d)+'">'+(c.isArray(a.settings.months_abbr)&&void 0!==a.settings.months_abbr[b]?a.settings.months_abbr[b]:a.settings.months[b].substr(0,3))+"</td>"}H.html(c(e+"</tr>"));a.settings.always_visible&&(ma=c("td:not(.dp_disabled)",H));H.show()},Ba=function(){ja(g-7+" - "+(g+4));for(var e="<tr>",b=0;12>b;b++){0<b&&0===b%3&&(e+="</tr><tr>");var d="";C(g-7+b)?d+=" dp_disabled":L&&L==g-7+b?d+=" dp_selected":O==g-7+b&&(d+=" dp_current"); e+="<td"+(""!==c.trim(d)?' class="'+c.trim(d)+'"':"")+">"+(g-7+b)+"</td>"}I.html(c(e+"</tr>"));a.settings.always_visible&&(na=c("td:not(.dp_disabled)",I));I.show()},va=function(a){if("explorer"==N.name&&6==N.version){if(!$){var b=p(h.css("zIndex"))-1;$=jQuery("<iframe>",{src:'javascript:document.write("")',scrolling:"no",frameborder:0,allowtransparency:"true",css:{zIndex:b,position:"absolute",top:-1E3,left:-1E3,width:h.outerWidth(),height:h.outerHeight(),filter:"progid:DXImageTransform.Microsoft.Alpha(opacity=0)", display:"none"}});c("body").append($)}switch(a){case "hide":$.hide();break;default:a=h.offset(),$.css({top:a.top,left:a.left,display:"block"})}}},C=function(e,b,d){if((void 0===e||isNaN(e))&&(void 0===b||isNaN(b))&&(void 0===d||isNaN(d)))return!1;if(c.isArray(a.settings.direction)||0!==p(a.settings.direction)){var f=p(J(e,"undefined"!=typeof b?y(b,2):"","undefined"!=typeof d?y(d,2):"")),h=(f+"").length;if(8==h&&("undefined"!=typeof s&&f<p(J(q,y(n,2),y(w,2)))||"undefined"!=typeof u&&f>p(J(P,y(W,2), y(aa,2))))||6==h&&("undefined"!=typeof s&&f<p(J(q,y(n,2)))||"undefined"!=typeof u&&f>p(J(P,y(W,2))))||4==h&&("undefined"!=typeof s&&f<q||"undefined"!=typeof u&&f>P))return!0}"undefined"!=typeof b&&(b+=1);var l=!1,g=!1;G&&c.each(G,function(){if(!l&&(-1<c.inArray(e,this[2])||-1<c.inArray("*",this[2]))&&("undefined"!=typeof b&&-1<c.inArray(b,this[1])||-1<c.inArray("*",this[1]))&&("undefined"!=typeof d&&-1<c.inArray(d,this[0])||-1<c.inArray("*",this[0]))){if("*"==this[3])return l=!0;var a=(new Date(e, b-1,d)).getDay();if(-1<c.inArray(a,this[3]))return l=!0}});V&&c.each(V,function(){if(!g&&(-1<c.inArray(e,this[2])||-1<c.inArray("*",this[2]))&&(g=!0,"undefined"!=typeof b))if(g=!0,-1<c.inArray(b,this[1])||-1<c.inArray("*",this[1])){if("undefined"!=typeof d){g=!0;if(-1<c.inArray(d,this[0])||-1<c.inArray("*",this[0])){if("*"==this[3])return g=!0;var a=(new Date(e,b-1,d)).getDay();if(-1<c.inArray(a,this[3]))return g=!0}g=!1}}else g=!1});return V&&g||!G||!l?!1:!0},Y=function(a){return(a+"").match(/^\-?[0-9]+$/)? !0:!1},ja=function(e){c(".dp_caption",D).html(e);if(c.isArray(a.settings.direction)||0!==p(a.settings.direction)||1==B.length&&"months"==B[0]){e=g;var b=x,d,f;if("days"==t)f=!C(0>b-1?J(e-1,"11"):J(e,y(b-1,2))),d=!C(11<b+1?J(e+1,"00"):J(e,y(b+1,2)));else if("months"==t){if(!s||s.getFullYear()<=e-1)f=!0;if(!u||u.getFullYear()>=e+1)d=!0}else if("years"==t){if(!s||s.getFullYear()<e-7)f=!0;if(!u||u.getFullYear()>e+4)d=!0}f?c(".dp_previous",D).removeClass("dp_blocked"):(c(".dp_previous",D).addClass("dp_blocked"), c(".dp_previous",D).removeClass("dp_hover"));d?c(".dp_next",D).removeClass("dp_blocked"):(c(".dp_next",D).addClass("dp_blocked"),c(".dp_next",D).removeClass("dp_hover"))}},R=function(){if(""===E.text()||"days"==t){if(""===E.text()){a.settings.always_visible||h.css("left",-1E3);h.show();wa();var e=E.outerWidth(),b=E.outerHeight();H.css({width:e,height:b});I.css({width:e,height:b});D.css("width",e);X.css("width",e);h.hide()}else wa();H.hide();I.hide()}else"months"==t?(Aa(),E.hide(),I.hide()):"years"== t&&(Ba(),E.hide(),H.hide());a.settings.onChange&&"function"==typeof a.settings.onChange&&void 0!==t&&(e="days"==t?E.find("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked)"):"months"==t?H.find("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked)"):I.find("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked)"),e.each(function(){if("days"==t)if(c(this).hasClass("dp_not_in_month_selectable")){var a=c(this).attr("class").match(/date\_([0-9]{4})(0[1-9]|1[012])(0[1-9]|[12][0-9]|3[01])/); c(this).data("date",a[1]+"-"+a[2]+"-"+a[3])}else c(this).data("date",g+"-"+y(x+1,2)+"-"+y(p(c(this).text()),2));else"months"==t?(a=c(this).attr("class").match(/dp\_month\_([0-9]+)/),c(this).data("date",g+"-"+y(p(a[1])+1,2))):c(this).data("date",p(c(this).text()))}),a.settings.onChange(t,e,d));X.show();!0===a.settings.show_clear_date||0===a.settings.show_clear_date&&""!==d.val()||a.settings.always_visible&&!1!==a.settings.show_clear_date?(S.show(),ca?(ba.css("width","50%"),S.css("width","50%")):(ba.hide(), S.css("width","100%"))):(S.hide(),ca?ba.show().css("width","100%"):X.hide())},ea=function(e,b,h,f,n){var l=new Date(e,b,h,12,0,0),q="days"==f?la:"months"==f?ma:na,m;m="";for(var k=l.getDate(),p=l.getDay(),r=a.settings.days[p],s=l.getMonth()+1,u=a.settings.months[s-1],t=l.getFullYear()+"",w=0;w<a.settings.format.length;w++){var B=a.settings.format.charAt(w);switch(B){case "y":t=t.substr(2);case "Y":m+=t;break;case "m":s=y(s,2);case "n":m+=s;break;case "M":u=c.isArray(a.settings.months_abbr)&&void 0!== a.settings.months_abbr[s-1]?a.settings.months_abbr[s-1]:a.settings.months[s-1].substr(0,3);case "F":m+=u;break;case "d":k=y(k,2);case "j":m+=k;break;case "D":r=c.isArray(a.settings.days_abbr)&&void 0!==a.settings.days_abbr[p]?a.settings.days_abbr[p]:a.settings.days[p].substr(0,3);case "l":m+=r;break;case "N":p++;case "w":m+=p;break;case "S":m=1==k%10&&"11"!=k?m+"st":2==k%10&&"12"!=k?m+"nd":3==k%10&&"13"!=k?m+"rd":m+"th";break;default:m+=B}}d.val(m);a.settings.always_visible&&(K=l.getMonth(),x=l.getMonth(), L=l.getFullYear(),g=l.getFullYear(),U=l.getDate(),q.removeClass("dp_selected"),n.addClass("dp_selected"),"days"==f&&n.hasClass("dp_not_in_month_selectable")&&a.show());a.hide();pa(l);if(a.settings.onSelect&&"function"==typeof a.settings.onSelect)a.settings.onSelect(m,e+"-"+y(b+1,2)+"-"+y(h,2),l,d);d.focus()},J=function(){for(var a="",b=0;b<arguments.length;b++)a+=arguments[b]+"";return a},y=function(a,b){for(a+="";a.length<b;)a="0"+a;return a},p=function(a){return parseInt(a,10)},pa=function(e){a.settings.pair&& c.each(a.settings.pair,function(){var a=c(this);a.data&&a.data("Zebra_DatePicker")?(a=a.data("Zebra_DatePicker"),a.update({reference_date:e,direction:0===a.settings.direction?1:a.settings.direction}),a.settings.always_visible&&a.show()):a.data("zdp_reference_date",e)})},ta=function(c){"block"!=h.css("display")&&27!=c.which||a.hide()},sa=function(d){if("block"==h.css("display")){if(a.settings.show_icon&&c(d.target).get(0)===r.get(0))return!0;0===c(d.target).parents().filter(".Zebra_DatePicker").length&& a.hide()}},ra=function(){a.hide();void 0!==r&&(clearTimeout(oa),oa=setTimeout(function(){a.update()},100))},N={init:function(){this.name=this.searchString(this.dataBrowser)||"";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||""},searchString:function(a){for(var b=0;b<a.length;b++){var c=a[b].string,d=a[b].prop;this.versionSearchString=a[b].versionSearch||a[b].identity;if(c){if(-1!=c.indexOf(a[b].subString))return a[b].identity}else if(d)return a[b].identity}}, searchVersion:function(a){var b=a.indexOf(this.versionSearchString);if(-1!=b)return parseFloat(a.substring(b+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Firefox",identity:"firefox"},{string:navigator.userAgent,subString:"MSIE",identity:"explorer",versionSearch:"MSIE"}]};N.init();ua()};c.fn.Zebra_DatePicker=function(ga){return this.each(function(){void 0!==c(this).data("Zebra_DatePicker")&&c(this).data("Zebra_DatePicker").destroy();var ha=new c.Zebra_DatePicker(this, ga);c(this).data("Zebra_DatePicker",ha)})}})(jQuery);(function(e){e.Zebra_Form=function(u,x){var g=this,O={scroll_to_error:!0,tips_position:"left",close_tips:!0,validate_on_the_fly:!1,validate_all:!1,assets_path:null};g.settings={};var q={},K={},y={},G=[],n={},r={},B=!1,C=!1,v,m=e(u);g.filter_input=function(a,c,d){var e,b="";if(window.event)e=window.event.keyCode,c=window.event;else if(c)e=c.which;else return!0;switch(a){case "alphabet":b="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";break;case "digits":case "number":case "float":b="0123456789"; break;case "alphanumeric":b="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";break;default:return!0}d&&(b+=d);c=c.srcElement?c.srcElement:c.target||c.currentTarget;if(null==e||0==e||8==e||9==e||13==e||27==e)return!0;e=String.fromCharCode(e);return-1<b.indexOf(e)||"number"==a&&"-"==e&&0==D(c)||"float"==a&&("-"==e&&0==D(c)||"."==e&&0!=D(c)&&null==c.value.match(/\./))?!0:!1};g.init=function(){g.settings=e.extend({},O,x);m.find("option.dummy").remove();e("div.error",m).each(function(){e("div.close a", e(this)).bind("click",function(b){b.preventDefault();e(this).closest("div.error").animate({height:0,opacity:0},250,function(){e(this).remove()})})});e(".control",m).each(function(){var b=e(this),a={id:b.attr("id"),name:b.attr("name"),type:H(b)},d=b.closest(".row");void 0!=a.name&&(a.name=a.name.replace(/\[\]$/,""));d.length&&b.bind({focus:function(){d.addClass("highlight")},blur:function(){d.removeClass("highlight")}});if(b.hasClass("inside")&&("text"==a.type||"password"==a.type||"textarea"==a.type)|| b.hasClass("show-character-counter")||("text"==a.type||"password"==a.type)&&b.data("prefix"))var c=jQuery('<span class="Zebra_Form_Wrapper"></span>').css({display:b.css("display"),position:"static"==b.css("position")?"relative":b.css("position"),"float":b.css("float"),top:b.css("top"),right:b.css("right"),bottom:b.css("bottom"),left:b.css("left")}),b=b.replaceWith(c).css({position:"relative",top:"auto",right:"auto",bottom:"auto",left:"auto"}).appendTo(c);if(!b.hasClass("inside")||"text"!=a.type&& "password"!=a.type&&"textarea"!=a.type)b.hasClass("other")&&"select-one"==a.type&&(M(b),b.change(function(){M(b)}));else{var c=b.position(),f="text"==a.type||"password"==a.type?jQuery("<input>").attr({type:"text","class":"Zebra_Form_Placeholder",autocomplete:"off",value:b.attr("title")}):jQuery("<textarea>").attr({"class":"Zebra_Form_Placeholder",autocomplete:"off"}).html(b.attr("title"));"password"==a.type&&b.css("fontFamily","inherit");f.css({fontFamily:b.css("fontFamily"),fontSize:b.css("fontSize"), fontStyle:b.css("fontStyle"),fontWeight:b.css("fontWeight"),left:c.left,top:c.top,width:parseInt(b.css("width"),10)+(parseInt(b.css("borderLeftWidth"),10)||0)+(parseInt(b.css("borderRightWidth"),10)||0),height:parseInt(b.css("height"),10)+(parseInt(b.css("borderTopWidth"),10)||0)+(parseInt(b.css("borderBottomWidth"),10)||0),paddingTop:parseInt(b.css("paddingTop"),10)||0,paddingRight:parseInt(b.css("paddingRight"),10)||0,paddingBottom:parseInt(b.css("paddingBottom"),10)||0,paddingLeft:parseInt(b.css("paddingLeft"), 10)||0,marginTop:parseInt(b.css("marginTop"),10)||0,marginRight:parseInt(b.css("marginRight"),10)||0,marginBottom:parseInt(b.css("marginBottom"),10)||0,marginLeft:parseInt(b.css("marginLeft"),10)||0}).insertAfter(b).hide();b.removeAttr("title");f.bind("focus",function(){b.focus()});b.bind({focus:function(){f.hide()},blur:function(){""==e(this).val()&&f.show()}});b.data("Zebra_Form_Placeholder",f);G.push(b);"password"==a.type&&b.css({fontFamily:"Verdana, Tahoma, Arial"})}g.settings.clientside_disabled|| "undefined"==typeof g.settings.validation_rules[a.name]||g.register(b,!1);if(("text"==a.type||"textarea"==a.type||"password"==a.type)&&b.attr("maxlength")&&(b.data("maxlength",b.attr("maxlength")),b.bind("keyup",function(a){a=e(this);var b=a.data("maxlength"),c=L(a);a.attr("maxlength",b-c);a.hasClass("show-character-counter")&&(a=b-c-a.val().length,I.html(0>a?"<span>"+a+"</span>":a))}),b.hasClass("show-character-counter"))){var c=b.position(),I=jQuery("<div>",{"class":"Zebra_Character_Counter",css:{visibility:"hidden"}}).html(b.data("maxlength")).insertAfter(b); width=I.outerWidth();height=I.outerHeight();I.css({top:c.top+b.outerHeight()-height/1.5,left:c.left+b.outerWidth()-width/1.5,width:I.width(),visibility:"visible"});b.trigger("keyup")}"text"!=a.type&&"password"!=a.type||!b.data("prefix")||(a=b.data("prefix"),c=decodeURIComponent(a.replace(/\+/g," ")).match(/^img\:(.*)/i),a=null!=c?jQuery("<img>",{src:c[1]}):jQuery("<div>",{css:{fontFamily:b.css("fontFamily"),fontSize:b.css("fontSize")}}).html(decodeURIComponent(a.replace(/\+/g," "))),a.attr({"class":"Zebra_Form_Input_Prefix"}).css({visibility:"hidden", position:"absolute"}).insertAfter(b),a.css({top:(b.outerHeight()-a.outerHeight())/2,left:parseInt(b.css("paddingLeft"),10),visibility:"visible"}),b.css({paddingLeft:"+="+a.outerWidth(!0)}),"border-box"!=b.css("boxSizing")&&b.css({width:"-="+a.outerWidth(!0)}),void 0!=f&&f.css({left:"+="+a.outerWidth(!0)}))});e("input.submit, input.image",m).bind("click",function(){m.data("zf_clicked_button",e(this).attr("id"))});for(var a in g.settings.validation_rules)for(var c in g.settings.validation_rules[a])"dependencies"== c&&function(){var b=g.settings.validation_rules[a][c];"string"==typeof b[1]&&(b=b[0]);for(var d in b){var f=e('input[name="'+d+'"],select[name="'+d+'"],textarea[name="'+d+'"]',u);0==f.length&&(f=e('input[name="'+d+'[]"],select[name="'+d+'[]"],textarea[name="'+d+'[]"]',u));if(0<f.length){n[d]||(n[d]={conditions:{},elements:[],event:!1});-1==e.inArray(a,n[d].elements)&&n[d].elements.push(a);var k=A(b[d]),p=H(e(f[0]));n[d].conditions[k]||(n[d].conditions[k]=function(){var a=b[d],c=[];f.each(function(){switch(p){case "radio":case "checkbox":this.checked&& c.push(e(this).val());break;case "image":case "submit":m.data("zf_clicked_button")==e(this).attr("id")&&c.push("click");break;default:c.push(e(this).val())}});var g=!1;0<c.length&&(e.isArray(a)?e.each(a,function(b){var d=0;e.each(c,function(f){e.isArray(a[b])||c[f]!=a[b]?e.isArray(a[b])&&-1<e.inArray(c[f],a[b])&&d++:g=!0});g||d!=a[b].length||(g=!0)}):e.each(c,function(b){a==c[b]&&(g=!0)}));return g})}}0<f.length&&!1==n[d].event&&(n[d].event=function(a){e.each(n[d].elements,function(a){var b=g.settings.validation_rules[n[d].elements[a]].dependencies, c=!0;if("string"==typeof b[1]){var f=b[1].split(","),f=e.map(f,function(a){return e.trim(a)}),k=f.shift();arguments=f;b=b[0]}for(var h in b)f=A(b[h]),n[h].conditions[f]()||(c=!1);if(void 0!=b[d]&&void 0!=k){b=window;k=k.split(".");h=k.pop();for(f=0;f<k.length;f++)if(void 0!=b[k[f]])b=b[k[f]];else throw Error('"'+k[f]+"\" namespace doesn't exist in the global scope!");try{b[h].apply(void 0,[c].concat(arguments))}catch(p){throw Error('"'+h+'" callback function was not found!');}}})},f.bind("checkbox"== p||"radio"==p||"select-multiple"==p||"submit"==p||"button"==p?"click":"select-one"==p?"change":"blur",n[d].event));f.length&&n[d].event()}();var d=e(".captcha-container");if(0<d.length){var f=e("img",d);e("a",d).bind("click",function(a){a.preventDefault();f.attr("src",f.attr("src").replace(/nocache=[0-9]+/,"nocache="+(new Date).getTime()))})}m.bind("submit",function(a){!1!=B||void 0==g.settings.validation_rules||C||g.validate()||a.preventDefault();C=!1});0<G.length&&setInterval(P,50);v={init:function(){this.name= this.searchString(this.dataBrowser)||"";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||""},searchString:function(a){for(var d=0;d<a.length;d++){var c=a[d].string,e=a[d].prop;this.versionSearchString=a[d].versionSearch||a[d].identity;if(c){if(-1!=c.indexOf(a[d].subString))return a[d].identity}else if(e)return a[d].identity}},searchVersion:function(a){var d=a.indexOf(this.versionSearchString);if(-1!=d)return parseFloat(a.substring(d+this.versionSearchString.length+ 1))},dataBrowser:[{string:navigator.userAgent,subString:"Firefox",identity:"firefox"},{string:navigator.userAgent,subString:"MSIE",identity:"explorer",versionSearch:"MSIE"}]};v.init()};g.attach_tip=function(a,c){var d=a.attr("id");void 0==q[d]&&(q[d]={element:a});q[d].message=c;g.show_errors(a)};g.clear_errors=function(){e(".Zebra_Form_error_iFrameShim").remove();e(".Zebra_Form_error_message").remove();y={}};g.end_file_upload=function(a,c){var d=e("#"+a);if(d.length&&(g.clear_errors(),m.removeAttr("target"), setTimeout(function(){e("#"+a+"_iframe").remove()},1E3),e("#"+a+"_spinner").remove(),void 0!=q[a]))if(void 0!=c&&("object"==typeof c&&void 0!=c[0]&&void 0!=c[1]&&void 0!=c[2]&&void 0!=c[3])&&d.data("file_info",c),!0!==g.validate_control(d))d.val(""),d.css("visibility","visible"),g.show_errors(d);else{var f=d.offset(),b=jQuery("<div>",{"class":"Zebra_Form_filename",css:{left:f.left,top:f.top,width:d.outerWidth(),opacity:0}}).html(c[0]),f=jQuery("<a>",{href:"javascript:void(0)"}).html("x").bind("click", function(a){a.preventDefault();b.remove();d.val("");d.data("file_info")&&d.removeData("file_info");d.css("visibility","visible")});e("body").append(b.append(f));b.css({top:parseInt(b.css("top"),10)+(d.outerHeight()-b.outerHeight())/2,opacity:1})}};g.hide_error=function(a,c){var d=e("#"+a);if(void 0==c&&g.settings.validate_on_the_fly&&!0!==g.validate_control(d))g.show_errors(d,!1);else{var f=e("#Zebra_Form_error_message_"+a);0<f.length&&f.animate({opacity:0},250,function(){var b=f.data("shim");void 0!= b&&b.remove();f.remove();delete y[a]})}};g.register=function(a,c){var d={id:a.attr("id"),name:a.attr("name"),type:H(a)};if(void 0!=d.name){d.name=d.name.replace(/\[\]$/,"");a.hasClass("time")&&(d.name=d.name.replace(/\_(hours|minutes|seconds|ampm)$/,""));switch(d.type){case "radio":case "checkbox":a.bind({click:function(){g.hide_error(d.name)},blur:function(){g.hide_error(d.name)}});void 0==K[d.id]&&(K[d.id]=m.find("input[name^="+d.name+"]"));break;case "file":var f=a.clone(!0);f.attr("value",""); a.replaceWith(f);f.bind({keypress:function(a){f.attr("value","")},change:function(){if(void 0!=q[d.name].rules.upload){g.hide_error(d.name);f.data("file_info")&&f.removeData("file_info");var b=jQuery('<iframe id="'+d.id+'_iframe" name="'+d.id+'_iframe">',{src:"javascript:void(0)",scrolling:"no",marginwidth:0,marginheight:0,width:0,height:0,frameborder:0,allowTransparency:"true"}).css({position:"absolute",top:0,left:-1E3});e("body").append(b);b=m.attr("action");m.attr("action",decodeURIComponent(g.settings.assets_path)+ "process.php?form="+m.attr("id")+"&control="+d.id+"&path="+encodeURIComponent(decodeURIComponent(q[d.name].rules.upload[0]))+"&nocache="+(new Date).getTime());m.attr("target",d.id+"_iframe");a.css("visibility","hidden");var c=a.offset(),c=jQuery("<div>",{id:d.id+"_spinner","class":"Zebra_Form_spinner",css:{left:c.left,top:c.top}});e("body").append(c);B=!0;m.trigger("submit");m.attr("action",b);B=!1}},blur:function(){g.hide_error(d.name)}});a=f;break;case "select-one":case "select-multiple":a.bind({change:function(){g.hide_error(d.name)}, blur:function(){g.hide_error(d.name)}});break;default:a.blur(function(){var b=d.name;if("text"==d.type&&a.hasClass("other")){var c=d.id.match(/^(.*)\_other$/);null!=c&&(b=c[1])}g.hide_error(b)})}var b=g.settings.validation_rules[d.name];if(null!=b)if(void 0==c){var w=m.find(".control");e.each(w,function(c,f){if(f==a.get(0)){e(f);for(var g=null,h=c-1;null==g&&void 0!=w[h];)g=e(w[h]).attr("id"),h--;if(q[g]){h={};for(c in q)h[c]=q[c],g==c&&(h[d.id]={element:a,rules:b});q=h}else g={},g[d.id]={element:a, rules:b},e.extend(q,g)}})}else if(void 0!=c&&e("#"+c).length){e("#"+c).attr("id");var h={};for(index in q)h[index]=q[index],previous_element_id==index&&(h[d.id]={element:a,rules:b});q=h}else void 0!=c&&!1===c&&(q[d.id]={element:a,rules:b})}};g.show_errors=function(a,c){void 0!=c&&!1===c||g.clear_errors();var d=0;for(index in q){var f=q[index],b=f.element,w={id:b.attr("id"),name:b.attr("name"),type:H(b)},h="radio"==w.type||"checkbox"==w.type?w.name.replace(/\[\]$/,""):w.id;b.hasClass("time")&&(h=w.name.replace(/\_(hours|minutes|seconds|ampm)$/, ""));if((void 0==a||a.get(0)==b.get(0))&&void 0!=f.message&&void 0==y[h]){"none"==b.css("display")||(void 0!=c&&!1===c||g.settings.validate_all&&0<d)||b.focus();var k=e.extend(b.offset()),k=e.extend(k,{right:Math.floor(k.left+b.width())}),p=jQuery("<div/>",{"class":"Zebra_Form_error_message",id:"Zebra_Form_error_message_"+h,css:{opacity:0}}),f=jQuery("<div/>",{"class":"message"+(g.settings.close_tips?"":" noclose"),css:{_width:"auto"}}).html(f.message).appendTo(p);g.settings.close_tips&&jQuery("<a/>", {href:"javascript:void(0)","class":"close"+("explorer"==v.name&&6==v.version?"-ie6":"")}).html("x").appendTo(f).bind({click:function(a){a.preventDefault();g.hide_error(e(this).closest("div.Zebra_Form_error_message").attr("id").replace(/^Zebra\_Form\_error\_message\_/,""),!0)},focus:function(){e(this).blur()}});var m=jQuery("<div/>",{"class":"arrow"}).appendTo(p);e("body").append(p);var n=p.outerWidth(),t=p.outerHeight(),t=m.outerWidth(),f=m.outerHeight(),l=("left"==g.settings.tips_position?k.left: k.right)-n/2;m.css("left",n/2-t/2-1);if("radio"==w.type||"checkbox"==w.type)l=k.right-n/2-b.outerWidth()/2+1;0>l&&(l=2);p.css("left",l);n=p.outerWidth();t=p.outerHeight();b=k.top-t+f/2-1;0>b&&(b=2);p.css({left:l+"px",top:b+"px",height:t-f/2+"px"});y[h]=p;Q(p);p.animate({opacity:0.9},250);1!=++d||(!g.settings.scroll_to_error||void 0!=c&&!1===c)||e("html, body").animate({scrollTop:Math.max(parseInt(p.css("top"),10)+parseInt(p.css("height"),10)/2-e(window).height()/2,0)},0);if(!g.settings.validate_all)break}}}; g.submit=function(){m.trigger("submit")};g.validate_control=function(a){var c={id:a.attr("id"),name:a.attr("name"),type:H(a)},d=!0,f=q[c.id],b="radio"==c.type||"checkbox"==c.type?c.name.replace(/\[\]$/,""):c.id;a.hasClass("time")&&(b=c.name.replace(/\_(hours|minutes|seconds|ampm)$/,""));if(void 0!=f&&("none"!=a.css("display")&&"hidden"!=a.css("visibility")||a.data("file_info"))){var m=null;delete f.message;for(var h in f.rules){if(!d)break;switch(h){case "alphabet":switch(c.type){case "password":case "text":case "textarea":var k= RegExp("^[a-z"+F(f.rules[h][0]).replace(/\s/,"\\s")+"]+$","ig");""==e.trim(a.val())||k.test(a.val())||(d=!1)}break;case "alphanumeric":switch(c.type){case "password":case "text":case "textarea":k=RegExp("^[a-z0-9"+F(f.rules[h][0]).replace(/\s/,"\\s")+"]+$","ig"),""==e.trim(a.val())||k.test(a.val())||(d=!1)}break;case "compare":switch(c.type){case "password":case "text":case "textarea":e("#"+f.rules[h][0])&&a.val()==e("#"+f.rules[h][0]).val()||(d=!1)}break;case "dependencies":if(!N(b))return!0;break; case "custom":var p=!1;e.each(f.rules[h],function(b,c){if(!p){c=e.merge(e.merge([c[0]],[a.val()]),c.slice(1));var f="function"==typeof c[0]?c[0]:"function"==typeof window[c[0]]?window[c[0]]:!1;if(!1!==f)d=f.apply(f,c.slice(1));else throw d=!1,Error('Function "'+c[0]+"\" doesn't exist!");d||(custom_rule_error_message=c[c.length-1],p=!0)}});break;case "date":switch(c.type){case "text":if(""!=e.trim(a.val())){for(var k=!1,n=a.data("Zebra_DatePicker").settings.format,r="dDjlNSwFmMnYyGHghaAisU".split(""), t=[],l=[],n=F(n),v=0;v<r.length;v++)-1<(position=n.indexOf(r[v]))&&t.push({character:r[v],position:position});t.sort(function(a,b){return a.position-b.position});e.each(t,function(a,b){switch(b.character){case "d":l.push("0[1-9]|[12][0-9]|3[01]");break;case "D":l.push("[a-z]{3}");break;case "j":l.push("[1-9]|[12][0-9]|3[01]");break;case "l":l.push("[a-z]+");break;case "N":l.push("[1-7]");break;case "S":l.push("st|nd|rd|th");break;case "w":l.push("[0-6]");break;case "F":l.push("[a-z]+");break;case "m":l.push("0[1-9]|1[012]+"); break;case "M":l.push("[a-z]{3}");break;case "n":l.push("[1-9]|1[012]");break;case "Y":l.push("[0-9]{4}");break;case "y":l.push("[0-9]{2}");break;case "G":l.push("[0-9]|1[0-9]|2[0-3]");break;case "H":l.push("0[0-9]|1[0-9]|2[0-3]");break;case "g":l.push("[0-9]|1[0-2]");break;case "h":l.push("0[0-9]|1[0-2]");break;case "a":case "A":l.push("(am|pm)");break;case "i":l.push("[0-5][0-9]");break;case "s":l.push("[0-5][0-9]")}});if(0<l.length&&(t.reverse(),e.each(t,function(a,b){n=n.replace(b.character,"("+ l[l.length-a-1]+")")}),l=RegExp("^"+n+"$","ig"),segments=l.exec(a.val()))){var E=null,z=null,u=null,x="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),y="January February March April May June July August September October November December".split(" "),A=null,J=!0;t.reverse();e.each(t,function(b,c){if(!J)return!0;switch(c.character){case "m":case "n":z=parseInt(segments[b+1],10);break;case "d":case "j":E=parseInt(segments[b+1],10);break;case "D":case "l":case "F":case "M":A="D"== c.character||"l"==c.character?a.data("Zebra_DatePicker").settings.days:a.data("Zebra_DatePicker").settings.months;J=!1;e.each(A,function(a,d){if(J)return!0;if(segments[b+1].toLowerCase()==d.substring(0,"D"==c.character||"M"==c.character?3:d.length).toLowerCase()){switch(c.character){case "D":segments[b+1]=x[a].substring(0,3);break;case "l":segments[b+1]=x[a];break;case "F":segments[b+1]=y[a];z=a+1;break;case "M":segments[b+1]=y[a].substring(0,3),z=a+1}J=!0}});break;case "Y":u=parseInt(segments[b+ 1],10);break;case "y":u="19"+parseInt(segments[b+1],10)}});J&&(E||(E=1),z||(z=1),r=new Date(u,z-1,E),r.getFullYear()==u&&(r.getDate()==E&&r.getMonth()==z-1)&&(a.data("timestamp",Date.parse(y[z-1]+" "+E+", "+u)),k=!0))}k||(d=!1)}}break;case "datecompare":switch(c.type){case "password":case "text":case "textarea":if(void 0!=f.rules[h][0]&&void 0!=f.rules[h][1]&&e(f.rules[h][0])&&!0===g.validate_control(e(f.rules[h][0]))&&void 0!=a.data("timestamp"))switch(f.rules[h][1]){case ">":d=a.data("timestamp")> e("#"+f.rules[h][0]).data("timestamp");break;case ">=":d=a.data("timestamp")>=e("#"+f.rules[h][0]).data("timestamp");break;case "<":d=a.data("timestamp")<e("#"+f.rules[h][0]).data("timestamp");break;case "<=":d=a.data("timestamp")<=e("#"+f.rules[h][0]).data("timestamp")}else d=!1}break;case "digits":switch(c.type){case "password":case "text":case "textarea":k=RegExp("^[0-9"+F(f.rules[h][0]).replace(/\s/,"\\s")+"]+$","ig"),""==e.trim(a.val())||k.test(a.val())||(d=!1)}break;case "email":switch(c.type){case "password":case "text":case "textarea":""!= e.trim(a.val())&&null==a.val().match(/^([a-zA-Z0-9_\-\+\~\^\{\}]+[\.]?)+@{1}([a-zA-Z0-9_\-\+\~\^\{\}]+[\.]?)+\.[A-Za-z0-9]{2,}$/)&&(d=!1)}break;case "emails":switch(c.type){case "password":case "text":case "textarea":k=a.val().split(","),e.each(k,function(a,b){""!=e.trim(b)&&null==e.trim(b).match(/^([a-zA-Z0-9_\-\+\~\^\{\}]+[\.]?)+@{1}([a-zA-Z0-9_\-\+\~\^\{\}]+[\.]?)+\.[A-Za-z0-9]{2,}$/)&&(d=!1)})}break;case "filesize":switch(c.type){case "file":var s=a.data("file_info");s&&(void 0==s[2]||void 0== s[3]||0!=s[2]||parseInt(s[3],10)>parseInt(f.rules[h][0],10))&&(d=!1)}break;case "filetype":switch(c.type){case "file":if(s=a.data("file_info")){void 0==g.mimes&&e.ajax({url:decodeURIComponent(g.settings.assets_path)+"mimes.json",async:!1,success:function(a){g.mimes=a},dataType:"json"});var G=e.map(f.rules[h][0].split(","),function(a){return e.trim(a)}),B=[];e.each(g.mimes,function(a,b){(e.isArray(b)&&-1<e.inArray(s[1],b)||!e.isArray(b)&&b==s[1])&&B.push(a)});var C=!1;e.each(B,function(a,b){-1<e.inArray(b, G)&&(C=!0)});C||(d=!1)}}break;case "float":switch(c.type){case "password":case "text":case "textarea":k=RegExp("^[0-9-."+F(f.rules[h][0]).replace(/\s/,"\\s")+"]+$","ig"),""!=e.trim(a.val())&&("-"==e.trim(a.val())||"."==e.trim(a.val())||null!=a.val().match(/\-/g)&&1<a.val().match(/\-/g).length||null!=a.val().match(/\./g)&&1<a.val().match(/\./g).length||0<a.val().indexOf("-")||!k.test(a.val()))&&(d=!1)}break;case "image":switch(c.type){case "file":(s=a.data("file_info"))&&null==s[1].match(/image\/(gif|jpeg|png|pjpeg)/i)&& (d=!1)}break;case "length":switch(c.type){case "password":case "text":case "textarea":if(""!=a.val()&&void 0!=f.rules[h][0]&&a.val().length-L(a)<f.rules[h][0]||void 0!=f.rules[h][1]&&0<f.rules[h][1]&&a.val().length-L(a)>f.rules[h][1])d=!1}break;case "number":switch(c.type){case "password":case "text":case "textarea":k=RegExp("^[0-9-"+F(f.rules[h][0]).replace(/\s/,"\\s")+"]+$","ig"),""!=e.trim(a.val())&&("-"==e.trim(a.val())||null!=a.val().match(/\-/g)&&1<a.val().match(/\-/g).length||0<a.val().indexOf("-")|| !k.test(a.val()))&&(d=!1)}break;case "regexp":switch(c.type){case "password":case "text":case "textarea":k=RegExp(f.rules[h][0],"g"),""!=e.trim(a.val())&&null==k.exec(a.val())&&(d=!1)}break;case "required":switch(c.type){case "checkbox":case "radio":var D=!1;K[c.id].each(function(){this.checked&&(D=!0)});D||(d=!1);break;case "file":case "password":case "text":case "textarea":""==e.trim(a.val())&&(d=!1);break;case "select-one":if(a.hasClass("time")&&0==a.get(0).selectedIndex)c.id=c.id.replace(/\_(hours|minutes|seconds|ampm)$/, ""),d=!1;else if(a.hasClass("other")&&"other"==a.val()&&(!e("#"+c.id+"_other").length||""==e.trim(e("#"+c.id+"_other").val()))||0==a.get(0).selectedIndex)d=!1;break;case "select-multiple":-1==a.get(0).selectedIndex&&(d=!1)}break;case "upload":switch(c.type){case "file":s=a.data("file_info"),!s||s[2]&&0==s[2]||(d=!1)}break;case "url":switch(c.type){case "password":case "text":case "textarea":k=RegExp("^(http(s)?://)"+(!0===f.rules[h][0]?"":"?")+"[^\\s\\.]+\\..{2,}","i"),""==e.trim(a.val())||k.test(a.val())|| (d=!1)}}d||(m=h,f.message="custom"==h?custom_rule_error_message:g.settings.validation_rules[b][m][g.settings.validation_rules[b][m].length-("length"==m&&4==g.settings.validation_rules[b][m].length?2:1)],f.value=a.val())}}return d?!0:m};g.validate=function(){var a,c=!0;g.clear_errors();r={};for(index in q){if(!c&&!g.settings.validate_all)break;a=q[index].element;!0!==(rule_not_passed=g.validate_control(a))&&(c=!1)}c||g.show_errors();C=!0;return c};var P=function(){e.each(G,function(){var a=e(this), c=a.data("Zebra_Form_Placeholder");""!=a.val()||a.is(":focus")?c.hide():c.show()})},F=function(a){return a.replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")},D=function(a){if(null!=a.selectionStart)return a.selectionStart;var c=document.selection.createRange(),d=c.duplicate();if("text"==a.type)return 0-d.moveStart("character",-1E5);var e=a.value.length;d.moveToElementText(a);d.setEndPoint("StartToStart",c);return e-d.text.length},L=function(a){a=a.val();var c=a.length;return a.replace(/(\r\n|\r|\n)/g,"\r\n").length- c},Q=function(a){if("explorer"==v.name&&6==v.version&&!a.data("shim")){var c=a.offset(),d=parseInt(a.css("zIndex"),10)-1,c=jQuery("<iframe>",{src:'javascript:document.write("")',scrolling:"no",frameborder:0,allowTransparency:"true","class":"Zebra_Form_error_iFrameShim",css:{zIndex:d,position:"absolute",top:c.top,left:c.left,width:a.outerWidth(),height:a.outerHeight(),filter:"progid:DXImageTransform.Microsoft.Alpha(opacity=0)",display:"block"}});e("body").append(c);a.data("shim",c)}},M=function(a){var c= e("#"+a.attr("id")+"_other");"other"==a.val()?c.css("display","block"):c.css("display","none")},A=function(a){if(!e.isArray(a))return a;var c="";e.each(a,function(d){d=a[d];e.isArray(d)&&(d="|"+A(d)+"|");c+=""+d});return c},H=function(a){var c="button input:checkbox input:file input:image input:password input:radio input:submit input:text select textarea".split(" ");for(index in c)if(a.is(c[index]))return"select"==c[index]?a.attr("multiple")?"select-multiple":"select-one":c[index].replace(/input\:/, "")},N=function(a,c){void 0==c&&(c=[]);2<c.length&&c.shift();if(-1<e.inArray(a,c))throw Error('Infinite recursion detected. The loop of dependencies is created by the following elements: "'+c.join('", "')+'"');c.push(a);var d=g.settings.validation_rules[a].dependencies;"string"==typeof d[1]&&(d=d[0]);var f=!0,b;for(b in d){if(void 0!=r[b]&&void 0!=r[b][d[b]])f=r[b][d[b]];else{void 0!=g.settings.validation_rules[b]&&void 0!=g.settings.validation_rules[b].dependencies&&(f=N(b,c));if(f){var m=A(d[b]); n[b]&&n[b].conditions[m]()||(f=!1)}void 0==r[b]&&(r[b]={});void 0==r[b][d[b]]&&(r[b][d[b]]=f)}if(!f)break}return f};g.init()};e.fn.Zebra_Form=function(u){return this.each(function(){var x=new e.Zebra_Form(this,u);e(this).data("Zebra_Form",x);if("function"==typeof x.settings.on_ready)x.settings.on_ready()})}})(jQuery);